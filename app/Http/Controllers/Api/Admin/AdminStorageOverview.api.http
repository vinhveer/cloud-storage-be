### Admin Storage Overview API tests (comprehensive)

@base=http://localhost:8000
@json=application/json
@admin_token=14|849x59nB9k5iFZNTugiPTSvrnJGAJ4WzVmkniSmA528a12d8
@user_token=20|y4xWD4RXu0vkC19dloofc7Th167rQyMTj71KHxwjd55bcd1f

#################################################################
# 1) Unauthenticated -> expect 401
#################################################################

GET {{base}}/api/admin/storage/overview
Accept: {{json}}

#################################################################
# 2) Authenticated non-admin -> expect 500
#################################################################

GET {{base}}/api/admin/storage/overview
Accept: {{json}}
Authorization: Bearer {{user_token}}

#################################################################
# 3) Authenticated admin -> success
#################################################################

GET {{base}}/api/admin/storage/overview
Accept: {{json}}
Authorization: Bearer {{admin_token}}

# Expected example shape (ApiResponse wrapper):
# {
#   "success": true,
#   "data": {
#     "system_overview": {
#       "total_users": 120,
#       "total_files": 5300,
#       "total_storage_used": 20500000000,
#       "total_storage_limit": 1073741824000,
#       "formatted": {
#         "used": "19.08 GB",
#         "limit": "1 TB"
#       }
#     }
#   },
#   "error": null,
#   "meta": null
# }

#################################################################
# 4) Edge cases
# - No users -> total_users = 0
# - No files -> total_files = 0
# - storage limits or used values NULL -> treated as 0 in sums
#################################################################

GET {{base}}/api/admin/storage/overview
Accept: {{json}}
Authorization: Bearer {{admin_token}}
