@base=http://localhost:8000
@json=application/json
@token=10|87n0OmYDO843dLeCI32Cyjh1kTavHdDxdlFfhuET5b4d3503

### 1) Unauthenticated -> expect 401
PUT {{base}}/api/shares/1
Accept: {{json}}
Content-Type: {{json}}

{
  "permission": "download"
}

### 2) Validation missing -> expect 422
PUT {{base}}/api/shares/1
Accept: {{json}}
Content-Type: {{json}}
Authorization: Bearer {{token}}

{}

### 3) Invalid permission -> expect 422
PUT {{base}}/api/shares/9
Accept: {{json}}
Content-Type: {{json}}
Authorization: Bearer {{token}}

{
  "permission": "edit"
}

### 4) Share not found -> expect 404
PUT {{base}}/api/shares/999999
Accept: {{json}}
Content-Type: {{json}}
Authorization: Bearer {{token}}

{
  "permission": "view"
}

### 5) Not owner -> expect 404
# Use a token that is NOT the owner of share id 1
PUT {{base}}/api/shares/1
Accept: {{json}}
Content-Type: {{json}}
Authorization: Bearer {{token}}

{
  "permission": "download"
}

### 6) Success -> expect 200 and updated share
# Use a token that is the owner of the share (replace id if needed)
PUT {{base}}/api/shares/1
Accept: {{json}}
Content-Type: {{json}}
Authorization: Bearer {{token}}

{
  "permission": "download"
}

# Expected body (example):
# {
#   "success": true,
#   "message": "Share permission updated successfully.",
#   "share": { "share_id": 1, "permission": "download" }
# }
