@baseUrl = http://localhost:8000
@tokenA = 20|y4xWD4RXu0vkC19dloofc7Th167rQyMTj71KHxwjd55bcd1f
@tokenB = 21|rFJVt1xln3wmkPn5AKez8GilVJL1y3yJko4G3kwc032a5ef9
@nonExistentId = 999999
@folderBId = 8
@parentId = 12
@childId = 10

### Unauthenticated delete (expect 401)
DELETE {{baseUrl}}/api/folders/{{nonExistentId}}
Accept: application/json


### Delete non-existent folder (expect 404)
DELETE {{baseUrl}}/api/folders/{{nonExistentId}}
Accept: application/json
Authorization: Bearer {{tokenA}}


### Create a folder as User B (expect 200) -> will set {{folderBId}}
POST {{baseUrl}}/api/folders
Accept: application/json
Content-Type: application/json
Authorization: Bearer {{tokenB}}

{
  "folder_name": "B's Folder for delete tests"
}


### Attempt delete of User B's folder using User A's token (expect 404 / FOLDER_NOT_FOUND)
DELETE {{baseUrl}}/api/folders/{{folderBId}}
Accept: application/json
Authorization: Bearer {{tokenA}}


### Create parent folder as User A (expect 200) -> sets {{parentId}}
POST {{baseUrl}}/api/folders
Accept: application/json
Content-Type: application/json
Authorization: Bearer {{tokenA}}

{
  "folder_name": "Parent for cascade delete"
}


### Create child folder under parent as User A (expect 200) -> sets {{childId}}
POST {{baseUrl}}/api/folders
Accept: application/json
Content-Type: application/json
Authorization: Bearer {{tokenA}}

{
  "folder_name": "Child folder",
  "parent_folder_id": {{parentId}}
}


### Delete parent folder as owner (expect 200)
DELETE {{baseUrl}}/api/folders/31
Accept: application/json
Authorization: Bearer {{tokenA}}


### Verify child folder is marked deleted (expect 404)
GET {{baseUrl}}/api/folders/{{childId}}
Accept: application/json
Authorization: Bearer {{tokenA}}


### Delete parent again (idempotent behavior) (expect 404 / FOLDER_NOT_FOUND)
DELETE {{baseUrl}}/api/folders/{{parentId}}
Accept: application/json
Authorization: Bearer {{tokenA}}

### Not found / no access — 404
DELETE {{baseUrl}}/api/folders/999999
Accept: application/json
Authorization: Bearer {{tokenA}}

### Unauthenticated — 401
DELETE {{baseUrl}}/api/folders/{{parentId}}
Accept: application/json

### Forbidden — 403
DELETE {{baseUrl}}/api/folders/1
Accept: application/json
Authorization: Bearer {{tokenA}}
